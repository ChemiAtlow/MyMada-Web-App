{"version":3,"sources":["webpack:///./src/components/ToolsPage/Metronome.vue?3c8c","webpack:///./src/components/ToolsPage/Metronome.vue?f5bc","webpack:///./src/utils/Metronome.ts","webpack:///./src/components/ToolsPage/Metronome.vue","webpack:///./src/components/ToolsPage/Metronome.vue?65c0","webpack:///./src/components/ToolsPage/Metronome.vue?0909","webpack:///./src/components/CircularButton.vue?b748","webpack:///./src/components/CircularButton.vue","webpack:///./src/components/CircularButton.vue?29b8","webpack:///./src/components/CircularButton.vue?93f5","webpack:///./src/components/CircularButton.vue?5f0b"],"names":["audioCtx","timerID","rcListener","trListener","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","startMetronome","_v","_s","$t","ref","attrs","isPlaying","activeTime","round","staticRenderFns","tempo","secondsPerBeat","lookahead","scheduleAheadTime","currentNote","nextNoteTime","nextNote","playSweep","osc","createOscillator","gain","createGain","connect","type","frequency","value","destination","exponentialRampToValueAtTime","currentTime","start","stop","scheduler","window","setTimeout","playOrPause","audioContext","timeRunListener","roundCompleteListener","state","resume","clearTimeout","runtimeListener","runningTime","$store","isMetronomeActive","dispatch","metronomeActiveTime","metronomeRound","AudioContext","Metronome","components","CircularButton","component","class","metronome","Click","working","_m","_t","WatchPreWork","preWorking","e","Started","Stopped","Boolean","required","default","immediate"],"mappings":"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","file":"js/chunk-84f1bdf6.17ad4754.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Metronome.vue?vue&type=style&index=0&id=0c1541f2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Metronome.vue?vue&type=style&index=0&id=0c1541f2&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"metro__valign\",on:{\"click\":_vm.startMetronome}},[_c('div',{staticClass:\"metro__valign-row\"},[_c('p',{staticClass:\"metro__info\"},[_vm._v(_vm._s(_vm.$t(\"tools-page.metronome.touch\")))]),_c('circular-button',{ref:\"metroBtn\",attrs:{\"metronome\":\"\",\"preWorking\":_vm.isPlaying}},[_vm._v(\" \"+_vm._s(_vm.activeTime)+\" \"),_c('p',{staticClass:\"round-num\"},[_vm._v(_vm._s(_vm.$t(\"tools-page.metronome.round\"))+\": \"+_vm._s(_vm.round))])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","let audioCtx: AudioContext;\nconst tempo = 100.0;\nconst secondsPerBeat = 60.0 / tempo;\nlet lookahead = 25.0; // How frequently to call scheduling function (in milliseconds)\nlet scheduleAheadTime = 0.1; // How far ahead to schedule audio (sec)\nlet currentNote = 0;\nlet nextNoteTime = 0.0; // when the next note is due.\nlet timerID: number;\nlet isPlaying = false;\nlet rcListener: () => void;\nlet trListener: (runningTime: number) => void;\n\nfunction nextNote() {\n    // Add beat length to last beat time\n    nextNoteTime += secondsPerBeat;\n    // Advance the beat number, wrap to zero\n    if (++currentNote >= 30) {\n        currentNote = 0;\n    }\n    if (currentNote === 0) rcListener();\n}\n\nfunction playSweep() {\n    let osc = audioCtx.createOscillator();\n    let gain = audioCtx.createGain();\n    osc.connect(gain);\n    osc.type = \"sine\";\n    osc.frequency.value = currentNote === 0 ? 320 : 277;\n    gain.connect(audioCtx.destination);\n    gain.gain.value = 20;\n    gain.gain.exponentialRampToValueAtTime(0.00001, audioCtx.currentTime + 0.9);\n    osc.start();\n    osc.stop(audioCtx.currentTime + 0.9);\n}\n\nfunction scheduler() {\n    // while there are notes that will need to play before the next interval, schedule them and advance the pointer.\n    while (nextNoteTime < audioCtx.currentTime + scheduleAheadTime) {\n        playSweep();\n        nextNote();\n    }\n    trListener(audioCtx.currentTime);\n    timerID = window.setTimeout(scheduler, lookahead);\n}\n\nexport const playOrPause: (audioContext: AudioContext, timeRunListener: (runningTime: number) => void, roundCompleteListener: () => void) => boolean = (audioContext: AudioContext, timeRunListener: (runningTime: number) => void, roundCompleteListener: () => void) => {\n    rcListener = roundCompleteListener || (() => {});\n    trListener = timeRunListener || (() => {});\n    audioCtx = audioContext;\n    isPlaying = !isPlaying;\n    if (isPlaying) {\n        // check if context is in suspended state (autoplay policy)\n        if (audioCtx.state === \"suspended\") {\n            audioCtx.resume();\n        }\n        currentNote = 0;\n        nextNoteTime = audioCtx.currentTime;\n        scheduler(); // kick off scheduling\n        return true;\n    } else {\n        window.clearTimeout(timerID);\n        timeRunListener(0);\n        return false;\n    }\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport CircularButton from \"@/components/CircularButton.vue\";\nimport { playOrPause } from \"@/utils/Metronome\";\n\n@Component({\n    components: {\n        CircularButton,\n    },\n})\nexport default class Metronome extends Vue {\n    runtimeListener = (runningTime: number) => (this.activeTime = runningTime.toString());\n    roundCompleteListener = () => this.round++;\n    get isPlaying(): boolean {\n        return this.$store.state.isMetronomeActive;\n    }\n    set isPlaying(value: boolean) {\n        this.$store.dispatch(\"setMetronome\", value);\n    }\n    get activeTime(): string {\n        return this.$store.state.metronomeActiveTime;\n    }\n    set activeTime(value) {\n        this.$store.dispatch(\"setMetronomeTime\", +value);\n    }\n    get round(): number {\n        return this.$store.state.metronomeRound;\n    }\n    set round(value: number) {\n        this.$store.dispatch(\"setMetronomeRound\", value);\n    }\n    startMetronome() {\n        this.isPlaying = playOrPause(new AudioContext(), this.runtimeListener, this.roundCompleteListener);\n        this.round = this.isPlaying ? 1 : 0;\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Metronome.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Metronome.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Metronome.vue?vue&type=template&id=0c1541f2&scoped=true&\"\nimport script from \"./Metronome.vue?vue&type=script&lang=ts&\"\nexport * from \"./Metronome.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Metronome.vue?vue&type=style&index=0&id=0c1541f2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c1541f2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"circular-btn\",class:{ metronome: _vm.metronome },on:{\"click\":_vm.Click}},[_c('div',{staticClass:\"aspect-ratio-box-inside\"},[_c('div',{staticClass:\"circle hoverable\",class:{ working: _vm.working }},[_vm._m(0),_vm._m(1),_c('div',{staticClass:\"circle__holder\"},[_c('div',{staticClass:\"circle__holder-content\"},[_c('h3',[_vm._t(\"default\")],2)])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"circle__mask on-left\"},[_c('div',{staticClass:\"circle__inner\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"circle__mask on-right\"},[_c('div',{staticClass:\"circle__inner\"})])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Emit, Prop, Watch } from \"vue-property-decorator\";\n\n@Component\nexport default class CircularButton extends Vue {\n    @Prop({ type: Boolean, required: false, default: false }) metronome!: boolean;\n    @Prop({ type: Boolean, required: false, default: false }) preWorking!: boolean;\n    working: boolean = false;\n    @Watch(\"preWorking\", { immediate: true })\n    WatchPreWork() {\n        this.working = this.preWorking;\n    }\n    @Emit()\n    Click(e: UIEvent) {\n        this.working = !this.working;\n        if (this.working) this.Started();\n        else this.Stopped();\n        return e;\n    }\n    @Emit()\n    Started() {\n        return;\n    }\n    @Emit()\n    Stopped() {\n        return;\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CircularButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CircularButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CircularButton.vue?vue&type=template&id=0e0b6ded&scoped=true&\"\nimport script from \"./CircularButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./CircularButton.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CircularButton.vue?vue&type=style&index=0&id=0e0b6ded&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0e0b6ded\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CircularButton.vue?vue&type=style&index=0&id=0e0b6ded&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CircularButton.vue?vue&type=style&index=0&id=0e0b6ded&lang=scss&scoped=true&\""],"sourceRoot":""}